<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LMS Dashboard</title>
  <link rel="stylesheet" href="style.css">
</head>
<body onload="initDashboard()">
  <div class="dashboard">
    <!-- Header -->
    <div class="dashboard-header">
      <div class="user-info">
        <div class="user-avatar" id="userAvatar">U</div>
        <div>
          <h2 id="userName">User Name</h2>
          <span id="userRole" style="color: #999;">Role</span>
        </div>
      </div>
      <div style="display: flex; gap: 10px;">
        <button onclick="openAISettings()" class="secondary" id="aiSettingsBtn" style="display: none;">ü§ñ AI Grading</button>
        <button onclick="logout()">Logout</button>
      </div>
    </div>

    <!-- Navigation -->
    <div class="navigation">
      <button class="nav-button active" onclick="showSection('allCourses')">All Courses</button>
      <button class="nav-button" id="myCoursesNav" onclick="showSection('myCourses')">My Courses</button>
      <button class="nav-button" id="createCourseNav" onclick="showSection('createCourse')" style="display: none;">Create Course</button>
      <button class="nav-button" onclick="showSection('assignments')">Assignments <span id="assignmentBadge" class="badge danger" style="display: none; margin-left: 5px;">0</span></button>
      <button class="nav-button" onclick="showSection('grades')">Grades</button>
      <button class="nav-button" id="teacherRatingsNav" onclick="showSection('teacherRatings')" style="display: none;">My Ratings</button>
      <button class="nav-button" onclick="showSection('leaderboard')">üèÜ Leaderboard</button>
      <button class="nav-button" onclick="showSection('notifications')">
        Notifications 
        <span id="notificationBadge" class="badge danger" style="display: none; margin-left: 5px;">0</span>
      </button>
    </div>

    <!-- All Courses Section -->
    <div id="allCourses" class="section active">
      <h2>Available Courses</h2>
      <div id="coursesGrid" class="courses-grid">
        <div class="spinner"></div>
      </div>
    </div>

    <!-- My Courses Section -->
    <div id="myCourses" class="section">
      <h2>My Courses</h2>
      <div id="myCoursesGrid" class="courses-grid">
        <div class="spinner"></div>
      </div>
    </div>

    <!-- Create Course Section (Teacher Only) -->
    <div id="createCourse" class="section">
      <h2>Create New Course</h2>
      <div class="form-section" style="max-width: 800px; margin: 0 auto;">
        <h3>Course Details</h3>
        <input type="text" id="courseTitle" placeholder="Course Title" />
        <textarea id="courseDescription" placeholder="Course Description"></textarea>
        <input type="text" id="courseDuration" placeholder="Duration (e.g., 8 weeks)" />
        
        <h3 style="margin-top: 20px;">Course Availability</h3>
        <div style="display: flex; gap: 20px; margin-bottom: 15px;">
          <div style="flex: 1;">
            <label style="display: block; margin-bottom: 5px; color: #666;">Target Class:</label>
            <select id="courseTargetClass" style="width: 100%; padding: 12px; border: 2px solid #e0e7ff; border-radius: 10px; font-size: 14px; background: white; cursor: pointer;">
              <option value="all">All Classes</option>
              <option value="Class 1">Class 1</option>
              <option value="Class 2">Class 2</option>
              <option value="Class 3">Class 3</option>
              <option value="Class 4">Class 4</option>
              <option value="Class 5">Class 5</option>
              <option value="Class 6">Class 6</option>
              <option value="Class 7">Class 7</option>
              <option value="Class 8">Class 8</option>
              <option value="Class 9">Class 9</option>
              <option value="Class 10">Class 10</option>
              <option value="Intermediate 1st Year">Intermediate 1st Year</option>
              <option value="Intermediate 2nd Year">Intermediate 2nd Year</option>
              <option value="Computer Science Engineering">Computer Science Engineering</option>
              <option value="Information Technology">Information Technology</option>
              <option value="Electronics and Communication">Electronics and Communication</option>
              <option value="Electrical Engineering">Electrical Engineering</option>
              <option value="Mechanical Engineering">Mechanical Engineering</option>
              <option value="Civil Engineering">Civil Engineering</option>
              <option value="Chemical Engineering">Chemical Engineering</option>
              <option value="Biotechnology">Biotechnology</option>
              <option value="Aerospace Engineering">Aerospace Engineering</option>
              <option value="Automobile Engineering">Automobile Engineering</option>
            </select>
          </div>
          <div style="flex: 1;">
            <label style="display: block; margin-bottom: 5px; color: #666;">Target Section (Optional):</label>
            <select id="courseTargetSection" style="width: 100%; padding: 12px; border: 2px solid #e0e7ff; border-radius: 10px; font-size: 14px; background: white; cursor: pointer;">
              <option value="all">All Sections</option>
              <option value="Section A">Section A</option>
              <option value="Section B">Section B</option>
              <option value="Section C">Section C</option>
              <option value="Section D">Section D</option>
            </select>
          </div>
        </div>
        
        <h3 style="margin-top: 30px;">Add Assignments (Optional)</h3>
        <p style="color: #666; margin-bottom: 15px;">Add assignments that will be available when students enroll</p>
        
        <div id="courseAssignmentsList"></div>
        
        <div style="background: #f8f9fa; padding: 20px; border-radius: 12px; margin-top: 15px;">
          <h4>New Assignment</h4>
          <input type="text" id="newAssignmentTitle" placeholder="Assignment Title" />
          <textarea id="newAssignmentDescription" placeholder="Assignment Description"></textarea>
          <label style="display: block; margin: 10px 0 5px 0; color: #666;">Sample Answer (for AI grading):</label>
          <textarea id="newAssignmentSampleAnswer" placeholder="Provide a sample/model answer for AI-powered grading" rows="4"></textarea>
          <p style="font-size: 12px; color: #999; margin-top: 5px;">üí° AI will compare student submissions with this answer to suggest grades</p>
          <label style="display: block; margin: 10px 0 5px 0; color: #666;">Due Date:</label>
          <input type="datetime-local" id="newAssignmentDueDate" />
          <label style="display: block; margin: 10px 0 5px 0; color: #666;">Help Video URL (optional):</label>
          <input type="url" id="newAssignmentVideoUrl" placeholder="https://youtube.com/watch?v=... or video link" />
          <button onclick="addAssignmentToCourse()" class="secondary" style="margin-top: 10px;">‚ûï Add Assignment</button>
        </div>
        
        <button onclick="createCourse()" style="margin-top: 20px;">Create Course</button>
      </div>
    </div>

    <!-- Assignments Section -->
    <div id="assignments" class="section">
      <h2>Assignments</h2>
      <div id="assignmentsContainer">
        <div class="spinner"></div>
      </div>
    </div>

    <!-- Grades Section -->
    <div id="grades" class="section">
      <h2>My Grades</h2>
      <div id="gradesContainer">
        <div class="spinner"></div>
      </div>
    </div>

    <!-- Notifications Section -->
    <div id="notifications" class="section">
      <h2>Notifications</h2>
      <div id="notificationsContainer">
        <div class="spinner"></div>
      </div>
    </div>

    <!-- Teacher Ratings Section -->
    <div id="teacherRatings" class="section">
      <h2>My Teaching Performance</h2>
      <div id="teacherRatingsContainer">
        <div class="spinner"></div>
      </div>
    </div>

    <!-- Leaderboard Section -->
    <div id="leaderboard" class="section">
      <h2>üèÜ Performance Leaderboards</h2>
      <div class="navigation" style="margin-bottom: 30px; justify-content: center;">
        <button class="nav-button active" onclick="switchLeaderboard('students')" id="studentsLeaderboardBtn">üë®‚Äçüéì Top Students</button>
        <button class="nav-button" onclick="switchLeaderboard('faculty')" id="facultyLeaderboardBtn">üë®‚Äçüè´ Top Faculty</button>
      </div>
      
      <!-- Students Leaderboard -->
      <div id="studentsLeaderboard" class="leaderboard-container">
        <div class="spinner"></div>
      </div>
      
      <!-- Faculty Leaderboard -->
      <div id="facultyLeaderboard" class="leaderboard-container" style="display: none;">
        <div class="spinner"></div>
      </div>
    </div>
  </div>

  <!-- Course Details Modal -->
  <div id="courseModal" class="modal">
    <div class="modal-content" id="modalBody">
      <!-- Dynamic content will be loaded here -->
    </div>
  </div>

  <!-- AI Settings Modal -->
  <div id="aiSettingsModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>ü§ñ AI Grading Configuration</h2>
        <button class="close-btn" onclick="closeAISettings()">&times;</button>
      </div>
      <div class="form-section">
        <p style="color: #666; margin-bottom: 15px;">Configure AI-powered grading using OpenAI API or use a simulated AI grading system</p>
        
        <label style="display: block; margin: 15px 0 5px 0; color: #666;">Select AI Grading Mode:</label>
        <select id="aiGradingMode" onchange="toggleAIMode()">
          <option value="simulated" selected>Simulated AI (No API needed)</option>
          <option value="openai">OpenAI API (Requires API Key)</option>
        </select>
        
        <div id="openaiConfig" style="display: none; margin-top: 15px;">
          <label style="display: block; margin: 10px 0 5px 0; color: #666;">OpenAI API Key:</label>
          <input type="password" id="openaiApiKey" placeholder="sk-..." />
          <p style="font-size: 12px; color: #999; margin-top: 5px;">üîí Your API key is stored locally and never sent to our servers</p>
          
          <label style="display: block; margin: 10px 0 5px 0; color: #666;">Model:</label>
          <select id="openaiModel">
            <option value="gpt-3.5-turbo">GPT-3.5 Turbo (Faster & Cheaper)</option>
            <option value="gpt-4">GPT-4 (More Accurate)</option>
          </select>
        </div>
        
        <button onclick="saveAISettings()" style="margin-top: 15px;">Save Settings</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
